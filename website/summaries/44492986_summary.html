<article>
    <h2>My first verified imperative program</h2>
    <div>
<div>
<h3>Summary</h3>
The article is a blog post by Markus Himmel, detailing his experience with formally verifying an imperative program using the Viper verification infrastructure. The author, a functional programming enthusiast with limited experience in imperative programming and formal verification, sets out to verify a simple program: an in-place array reversal algorithm.

The author begins by explaining the motivation behind the endeavor, highlighting the increasing importance of software correctness and the potential of formal verification to achieve it. He chose Viper due to its support for imperative features like mutable state, loops, and arrays, which are common in real-world software.

The core of the article revolves around the step-by-step process of writing the Viper code for the array reversal and then verifying its correctness. The author starts with a simple while loop for the array reversal and then proceeds to add assertions to specify the intended behavior of the code at various points. These assertions act as contracts, stating what should be true at a given program location.

The initial attempts at verification fail, leading the author to debug the code and the specifications. He describes the challenges he faces in expressing the loop invariants â€“ the conditions that must hold true at the beginning and end of each loop iteration to ensure the overall correctness of the algorithm. He iteratively refines the invariants and assertions, guided by the error messages from Viper.

The blog post explains the use of ghost variables, which are variables that exist only for the purpose of verification and do not affect the program's execution. The author utilizes a ghost variable to track the portion of the array that has already been reversed, which is crucial for expressing the loop invariant precisely.

The author also discusses the concept of permissions in Viper. Viper uses permissions to track which parts of memory a program is allowed to access. Before reading or writing to an array element, the program must have permission to access that element. The author explains how to obtain and release permissions within the loop to ensure that Viper can verify the memory safety of the program.

The blog post provides concrete examples of the Viper code snippets, including the loop, assertions, ghost variable updates, and permission management. It also shows the error messages generated by Viper when the verification fails, illustrating how these messages guide the debugging process.

Finally, the author expresses satisfaction upon successfully verifying the array reversal program. He reflects on the learning experience, highlighting the importance of understanding loop invariants, ghost variables, and permissions in formal verification of imperative programs. He also acknowledges the challenges involved but emphasizes the potential benefits of formal verification in ensuring software reliability. The author sees this project as a starting point for further exploration of formal verification techniques.

<h3>Key Points</h3>
*   **Goal:** To formally verify an in-place array reversal algorithm using the Viper verification infrastructure.
*   **Motivation:** Increasing importance of software correctness and the potential of formal verification.
*   **Tool:** Viper, chosen for its support for imperative features like mutable state, loops, and arrays.
*   **Process:** Iterative refinement of code, assertions, and loop invariants based on Viper's verification errors.
*   **Loop Invariants:** Crucial for expressing the conditions that must hold true at the beginning and end of each loop iteration.
*   **Ghost Variables:** Variables used solely for verification purposes, not affecting program execution, to track the reversed portion of the array.
*   **Permissions:** Viper tracks memory access permissions; programs need permission before reading or writing to memory locations.
*   **Challenges:** Expressing loop invariants accurately, managing permissions, and debugging verification errors.
*   **Outcome:** Successful verification of the array reversal program.
*   **Lessons Learned:** Importance of understanding loop invariants, ghost variables, and permissions in formal verification of imperative programs.
</div>
</div>
</article>
